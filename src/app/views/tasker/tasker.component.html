<div class="app-body">
    <main class="main d-flex align-items-center">
        <div class="container" style="border: 1px solid black; min-width: 100%;">
            <div class="row inblock">
                <div class="card col-md-6 col-lg-3 m-2">
                    <div class="text-value text-center">TO DO</div>
                    <div *ngFor="let task of Tasks">
                        <div *ngIf="((task.status === 'TODO') && !(task.userApplicant.id === userApplicant.id)) else change" class="card">
                            <div class="card-body p-4">
                                <div>
                                    <div class="text-field">{{task.name}}</div>
                                    <div>{{task.description}}</div>
                                    <div>{{task.userApplicant.firstName}}</div>
                                    <div>{{task.userContractor.firstName}}</div>
                                    <div>{{task.status}}</div>
                                </div>
                                <button (click)="changeTODO(task.name, task.description, task.userContractor)" type="button" class="btn btn-block btn-primary">Take</button>
                            </div>
                        </div>
                        <ng-template *ngIf="(task.status === 'TODO')" #change> 
                            <div class="card-body p-4">
                                <form>
                                    <h1 class="text-center">Create role</h1>
                                    <p class="text-center">Create new role</p>
                                    <div class="input-group mb-3">
                                        <div class="input-group-prepend">
                                        <span class="input-group-text"><i class="icon-user"></i></span>
                                        </div>
                                        <input [(ngModel)]="taskName" name="taskName" type="text" class="form-control" placeholder="Task name" autocomplete="taskName" required>
                                    </div>
                                    <div class="input-group mb-3">
                                        <div class="input-group-prepend">
                                        <span class="input-group-text"><i class="icon-user"></i></span>
                                        </div>
                                        <input [(ngModel)]="description" name="description" type="text" class="form-control" placeholder="Description" autocomplete="description" required>
                                    </div>
                                    <div class="mb-2">
                                        <label for="users">Choose users:</label>
                                        <select [(ngModel)]="userContractor" [ngModelOptions]="{standalone: true}" class="btn-group dropdown-menu float-right" id="users">
                                            <option *ngFor="let user of Users" [ngValue]="user" name="user">
                                                {{user.firstName}}
                                            </option>
                                        </select>
                                    </div>
                                    <button (click)="createTask()" type="button" class="btn btn-block btn-success">Create</button>
                                </form>
                            </div>
                        </ng-template>
                    </div>
                </div>
                <div class="card col-md-6 col-lg-3 m-2">
                    <div class="text-value text-center">IN PROGRESS</div>
                    <div *ngFor="let task of Tasks">
                        <div *ngIf="(task.status === 'IN_PROGRESS')" class="card">
                            <div class="card-body p-4">
                                <div>
                                    <div class="text-field">{{task.name}}</div>
                                    <div>{{task.description}}</div>
                                    <!-- <div>{{task.userApplicant}}</div>
                                    <div>{{task.userContractor}}</div> -->
                                    <div>{{task.status}}</div>
                                </div>
                                <button (click)="changeINPROG(task.name, task.description, task.userContractor)" type="button" class="btn btn-block btn-primary">Done</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card col-md-6 col-lg-3 m-2">
                    <div class="text-value text-center">DONE</div>
                    <div *ngFor="let task of Tasks">
                        <div *ngIf="(task.status === 'DONE')" class="card" style="min-height: 80%;">
                            <div class="card-body p-4">
                                <div>
                                    <div class="text-field">{{task.name}}</div>
                                    <div>{{task.description}}</div>
                                    <!-- <div>{{task.userApplicant}}</div>
                                    <div>{{task.userContractor}}</div> -->
                                    <div>{{task.status}}</div>
                                </div>
                                <!-- <button (click)="onSave()" type="button" class="btn btn-block btn-primary">SAVE Step</button> -->
                            </div>
                        </div>
                    </div>
                </div>
                
            </div>
            <div class="card col-md-6 col-lg-3">
                <div class="card-body p-4">
                    <form>
                        <h1 class="text-center">Create role</h1>
                        <p class="text-center">Create new role</p>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                            <span class="input-group-text"><i class="icon-user"></i></span>
                            </div>
                            <input [(ngModel)]="taskName" name="taskName" type="text" class="form-control" placeholder="Task name" autocomplete="taskName" required>
                        </div>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                            <span class="input-group-text"><i class="icon-user"></i></span>
                            </div>
                            <input [(ngModel)]="description" name="description" type="text" class="form-control" placeholder="Description" autocomplete="description" required>
                        </div>
                        <div class="mb-2">
                            <label for="users">Choose users:</label>
                            <select [(ngModel)]="userContractor" [ngModelOptions]="{standalone: true}" class="btn-group dropdown-menu float-right" id="users">
                                <option *ngFor="let user of Users" [ngValue]="user" name="user">
                                    {{user.firstName}}
                                </option>
                            </select>
                        </div>
                        <button (click)="createTask()" type="button" class="btn btn-block btn-success">Create</button>
                    </form>
                </div >
            </div>
            <div class="text-center">
                    <!-- <button (click)="onSumbit()" type="button" class="btn btn-primary mb-3">SUMBIT Steps</button> -->
                    <a class="" [routerLink]="['/dashboard']"><i class="fa fa-long-arrow-left"></i> Back to main page</a>
                </div>
        </div>
    </main>
</div>